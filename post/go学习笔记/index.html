<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>GO学习笔记</title>

  <meta name="description" content="GO学习笔记"/>
  <meta name="author" content="Miao"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <base href="https://charliemini.githhub.io/" />

  <link rel="stylesheet" href="css/fonts.css"/>
  <link rel="stylesheet" href="css/normalize.css"/>
  <link rel="stylesheet" href="css/skeleton.css"/>
  <link rel="stylesheet" href="css/custom.css"/>
  <link rel="stylesheet" href="genericons/genericons.css"/>
  
  
    
  
  <link rel="stylesheet" href="highlight/tomorrow-night.css"/>

  <link href="index.xml" rel="alternate" type="application/rss+xml" title="Posts + Links" />
  <link href="links/index.xml" rel="alternate" type="application/rss+xml" title="Links" />
  <link href="posts/index.xml" rel="alternate" type="application/rss+xml" title="Posts" />

  
</head>
<body>

<div id="flex-container">
  <input type="checkbox" id="sidebar-menu-checkbox" />
  <label for="sidebar-menu-checkbox" id="sidebar-menu"></label>

  <div id="fake-sidebar"></div>
  <div id="container">


<div id="post-header">
  <p class="post-infos">
    <time>2019-06-25 18:53</time>
    

  </p>
  <h1>GO学习笔记</h1>
</div>



<div class="post">
  

<h1 id="go学习笔记">GO学习笔记</h1>

<h2 id="结构化程序">结构化程序</h2>

<p>每个程序都由pkg的概念组成，必须在源代码里非注释的第一行致指明这个文件属于哪一个包,注意包的名字都要用小写字母。</p>

<p><code>package main</code></p>

<h2 id="标准库">标准库</h2>

<p>重定义包名</p>

<p><code>import fm &quot;fmt&quot;</code></p>

<p>如果导入了一个没有使用的包会报错</p>

<h2 id="类型">类型</h2>

<p>结构化的类型以nil作为默认值</p>

<h2 id="常量">常量</h2>

<p>用const定义，用于存储不会改变的数据线，只能是布尔型、数字和字符串。</p>

<p>支持显、隐式类型定义</p>

<h2 id="变量">变量</h2>

<p>用<code>var</code>关键字声明变量 <code>var identifier type</code> OR <code>var identifier type = value</code></p>

<p>当变量被声明后，系统自动赋予它该类型的零型，所有的内存在go中都是经过初始化的。变量命名规则遵循驼峰法。</p>

<p><strong>如果希望全局变量被外部包使用，则需要将首个单词字母大写</strong>*。</p>

<p>在函数体内部初始化声明变量时可以使用简短的语法：<code>a := 1</code></p>

<p>声明局部变量而不去使用它同样会出现编译错误</p>

<p>使用等于号进行变量间的相互赋值时，只是引用了同一个地址指针。</p>

<p>如果想要交换两个文明变量的值，可以使用<code>a,b = b,a</code></p>

<p><code>_</code> 被当作一个只写变量</p>

<p>全局变量除了可以在全局声明中初始化，也可以在<code>init</code>函数中初始化,也就是在声明的全局变量，可以经由<code>init</code> 函数更改赋值并作用于整个程序作用域。</p>

<h2 id="基本类型与运算符">基本类型与运算符</h2>

<p>GO是强类型语言，只支持显示转换，所以只有类型严格相同时才可以做运算操作。</p>

<p>不允许不同类型之间的混合使用，但允许和常量之间的混合使用。</p>

<pre><code class="language-go">func main(){
	var a int
	var b int 16
	a = 1
	b = a + a // 错误
	b = b + 5 
}
</code></pre>

<p>格式化字符串：%d用于格式化字符串</p>

<p>​                           %x，%X用于格式化16进制表示的数字</p>

<p>​                           %g用于格式化浮点数（%f输出浮点数，%e输出科学计数表示法）</p>

<p>​                            %0d用于输出定长的整数</p>

<p>​                           %n.mg用于表示数字n并精确到小数点后m位，g还可以替换为e，f</p>

<p>在算数运算时溢出并不会产生错误，只会将超出的位数抛弃。对于产出范围的有理数可以使用标准库中的<code>big</code>包</p>

<p>为了简化名称和解决名称冲突，可以使用类型别名。<code>type A int</code></p>

<p>GO字符串中字符为ASCII时占用一个字节，其它字符根据需要占据2-4个字节。</p>

<p><code>strings</code>包</p>

<ol>
<li><p>strings.HasPrefix(s, string) bool 判断s是否以string开头</p></li>

<li><p>strings.HasSuffix(s, string) bool 判断s是否以string结尾</p></li>

<li><p>strings.Contains(s, string) bool 判断字符串s是否包含string</p></li>

<li><p>strings.Index(s, string) int 返回字符串string在s中第一个匹配的索引，返回-1表示不存在</p></li>

<li><p>strings.LastIndex(s, string) int返回字符串string在s中最后一个匹配的索引，返回-1表示不存在</p></li>

<li><p>对于非ASCII编码的ch，建议使用strings,IndexRune定位                            strings.IndexRune(s, ch) int</p></li>

<li><p>strings.Replace(s, old, new, n) string 字符替换，n表示替换前几个字符，n=-1表示全替换</p></li>

<li><p>strings.Count(s, string) int 计算string在s中出现的非重叠次数。</p></li>

<li><p>strings.Repeat(s, count int) string 返回count次重复字符串s的的心字符串</p></li>

<li><p>strings.ToLower(s) string 转化为小写字符</p></li>

<li><p>strings.ToUpper(s) string 转化大写字符</p></li>

<li><p>strings.TrimSpace(s, &ldquo;&rdquo;) 剔除字符串s开头结尾指定字符</p>

<p>strings.TrimLeft()</p>

<p>strings.TrimRight()</p></li>

<li><p>string.Fields(s, sep) 切割字符串，返回slice</p></li>

<li><p>string.Join(sl []string, sep string) string 将字符串数组用字符sep拼接</p></li>

<li><p>String.NewReader(str) 用于生成一个reader并读取字符串中的内容，并返回指向该reader的指针。</p>

<p>Read() —&gt; byte</p></li>
</ol>

<p><code>strconv</code>包</p>

<p>用于字符串相关的类型转换。</p>

<p><code>strconv.Atoi(s string) (i int, err error)</code> 将字符串转换为 int 型</p>

<p><code>strconv.IntSize</code> 获取程序运行的操作系统下int所占位数</p>

<h2 id="指针">指针</h2>

<p>无法得到常量的地址</p>

<p>对于一个空指针的反向引用是不合法的</p>

<h2 id="控制结构">控制结构</h2>

<p>不要同时在if-else结构的两个分支里都使用return语句，会导致程序编译错误。(GO1.1 已修复)</p>

<p>Runtime.GOOS 是常量，是程序运行的操作系统类型。</p>

<p>if 可以包含初始化语句<code>if a := 10; a &gt; number</code> 这种方式定义的变量a只存在于if语句的作用域中。</p>

<p>switch中，如果在命中case后还希望执行下面的case，可以使用<code>fallthrough</code>关键字。</p>

<p>Go里的for循环和C一样，但存在一个for-range结构，可以迭代任何一个集合.     <code>for pos,char := range str</code>  pos为索引位置，char为值。</p>

<p>For,    switch,     select语句都可以配合标签使用。</p>

<h2 id="函数">函数</h2>

<p>用<code>func</code>定义函数，函数体用{}括起来</p>

<p>main函数没有参数，也没有返回类型</p>

<p>Go不允许进行函数重载，函数可以以声明的方式被使用，不需要函数体。</p>

<p>返回多个非命名返回值时，需要在函数头事先用（）括起返回类型，尽量不要使用非命名返回值。</p>

<p>在go中存在变参函数，类似于python中的*args，在传参中使用<code>name ...type</code>的形式，可以传递多个同类型的参数形式。如果不确定变长参数的类型或者变长参数存在多种类型的时候，可以用默认的空接口<code>interface{}</code>代替type。</p>

<p>Go允许自己定义结构类型,其中可以混合多种变量类型.</p>

<pre><code class="language-Go">type struct_name struct{
	part1 int,
	part float,
}
</code></pre>

<p>关键字defer在函数中被使用的时候，会在程序将要返回时执行，它类似栈，如果有多个defer会从最后面的开始执行。它允许我们进行一些&rdquo;收尾&rdquo;工作，比如关闭文件流，打印，解锁，关闭数据库，实现代码追踪。</p>

<p>在大量的递归调用中可能会发生栈溢出的问题，也就是栈资源耗尽。</p>

<p>匿名函数无法单独存在，但可以赋值给一个变量，func 关键字必须紧贴着第一个括号。这类似闭包，闭包可以看作是函数与外部变量的组合体，外部变量和函数一直存在。闭包避免了使用全局变量，将数据与函数紧密结合。</p>

<h2 id="数组">数组</h2>

<p><code>var identifier [len]type</code></p>

<p>当数组还未定义时，可以使用make方法定义切片<code>var slice1 []type = make([]type, len)</code>  简写为<code>slice1 := make([]type, len)</code></p>

<p>对于<code>[]byte</code>进行切片要使用bytes包，<code>var buffer bytes.Buffer</code>                       <code>var r *bytes.Buffer = new(bytes.Buffer)</code> 利用buffer.WriteString(s)的方法拼接内容比使用 <code>+=</code> 更省内存和cpu。</p>

<p>遍历数组和切片可以使用 for-range 结构，返回数组索引和value。</p>

<p>append方法可以实现对切片元素的增加，切片的拼接。</p>

<h2 id="map">map</h2>

<p>map对应的数据结构时字典。<code>var mapname map[keytype]valuetype</code></p>

</div>



<footer>
  <p class="footnote">Copyright &copy; 2019: All rights reserved by <a href="mailto:charlie_cc@foxmail.com">Miao</a></p>
</footer>

  </div>
  <div id="container-mask"></div>
<div id="sidebar">
<div class="sidebar">
  <div class="sidebar-about">
    <a href="https://charliemini.githhub.io/">
      <img src="media/me.jpg" title="Miao" alt="Me" />
      <h4 class="sidebar-title">Miao&amp;Blog</h4>
    </a>
    <span class="sidebar-tagline"> BLOG </span>
  </div>
  <nav class="sidebar-nav">
    <ul class="sidebar-nav-list">
      <li class="sidebar-nav-item nav-home">
        <span class="genericon genericon-home"></span><a class="sidebar-link" href="https://charliemini.githhub.io/">Home</a>
      </li>
      <li class="sidebar-nav-item">
        <a class="genericon genericon-feed" href="posts/index.xml"></a><a class="sidebar-link" href="posts/">Posts/</a>
      </li>
      <li class="sidebar-nav-item">
        <a class="genericon genericon-feed" href="links/index.xml"></a><a class="sidebar-link" href="links/">Links/</a>
      </li>
    </ul>
  </nav>
  <div class="sidebar-externals">
  

  
  <a class="genericon genericon-github" href="https://github.com/charliemini" ></a>
  

  
  | <a class="genericon genericon-twitter" href="https://twitter.com/wallflo61460582"></a>
  

  

  

  

  
  | <a class="genericon genericon-mail" href="mailto:charlie_cc@foxmail.com"></a>
  </div>
  <div class="sidebar-bottom">
    <hr />
    <p>Powered by <a href="http://gohugo.io">Hugo</a>.</p> <p>Theme: <a href="https://github.com/TiTi/hurock">Hurock</a>.</p>
    <p>Copyright &copy; 2019.</p> <p>All rights reserved.</p>
  </div>
</div>
</div>

</div>

<script src="highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>





</body>
</html>

